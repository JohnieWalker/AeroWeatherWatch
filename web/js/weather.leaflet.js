function airportMarker(a,b){var c=[];0==a.properties.metarStatus&&c.push('<span class="red">METAR NOT PROCESSED</span>'),c.push(a.properties.colorizedMetar),c.push(""),0==a.properties.tafStatus&&c.push('<span class="red">TAF NOT PROCESSED</span>'),c.push(a.properties.colorizedTaf),b.bindPopup(c.join("</br>")),b.setIcon(icons[a.properties.metarStatus+"_"+a.properties.tafStatus])}for(var icons={},i=0;4>i;i++)for(var a=0;4>a;a++)icons[i+"_"+a]=new L.Icon({iconUrl:"../img/"+i+".png",iconSize:[20,20],shadowUrl:"../img/"+a+".png",shadowSize:[30,30]});var map=L.map("map").setView([46.34,10.32],5),baseMap=L.tileLayer("http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"Created & Maintained by Deniss Kozickis @ EY",maxZoom:18}).addTo(map),airportsDest=new L.GeoJSON.AJAX(destinationWeather,{onEachFeature:airportMarker});airportsDest.addTo(map);var airportsAltn=new L.GeoJSON.AJAX(alternateWeather,{onEachFeature:airportMarker}),airports={Destinations:airportsDest,Alternates:airportsAltn};L.control.layers(null,airports).addTo(map);var outdatedWeatherBox=L.control({position:"bottomright"});outdatedWeatherBox.onAdd=function(){var a=L.DomUtil.create("div","info legend metar-info");return a.innerHTML="<strong>Outdated METARs</strong></br>",a},outdatedWeatherBox.addTo(map),$(function(){function a(){$.getJSON(oldMetar,function(a){var b=[];b.push("<strong>Outdated METARs</strong></br>"),$.each(a,function(a,c){b.push(c)}),$("div.metar-info").html(b.join(" "))})}setInterval(a,6e4),setInterval(airportsDest.refresh(),12e4),setInterval(airportsAltn.refresh(),13e4),a()});