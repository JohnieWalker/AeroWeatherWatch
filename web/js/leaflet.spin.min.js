!function(a){var b={spin:function(a,b){a?(this._spinner||(this._spinner=new Spinner(b).spin(this._container),this._spinning=0),this._spinning++):--this._spinning<=0&&this._spinner&&(this._spinner.stop(),this._spinner=null)}},c=function(){this.on("layeradd",function(a){a.layer.loading&&this.spin(!0),"function"==typeof a.layer.on&&(a.layer.on("data:loading",function(){this.spin(!0)},this),a.layer.on("data:loaded",function(){this.spin(!1)},this))},this),this.on("layerremove",function(a){a.layer.loading&&this.spin(!1),"function"==typeof a.layer.on&&(a.layer.off("data:loaded"),a.layer.off("data:loading"))},this)};"function"==typeof define&&define.amd?(define(["leaflet"],b),define(["leaflet"],c)):"object"==typeof exports&&(module.exports={SpinMapMixin:b,SpinMapInitHook:c}),void 0!==a&&a.L&&(L.Map.include(b),L.Map.addInitHook(c))}(window);